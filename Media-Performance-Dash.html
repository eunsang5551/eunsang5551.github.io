<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Media Performance Dashboard</title>

    <!-- amCharts 5 -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

    <style>
      html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        background: #0f172a;
        color: white;
        font-family: Arial;
      }

      #chartdiv {
        width: 100%;
        height: 650px;
      }
    </style>
  </head>

  <body>
    <h2 style="padding: 18px;">Media KPI Performance (종합)</h2>

    <div id="chartdiv"></div>

    <script>
      am5.ready(function () {
        var root = am5.Root.new("chartdiv");

        root.setThemes([am5themes_Animated.new(root)]);

        var chart = root.container.children.push(
          am5xy.XYChart.new(root, {
            panX: true,
            panY: true,
            wheelX: "panX",
            wheelY: "zoomX",
            layout: root.verticalLayout
          })
        );

        var data = [
          { press: "조선일보", first: 32, follow: 18 },
          { press: "중앙일보", first: 20, follow: 25 },
          { press: "동아일보", first: 41, follow: 12 },
          { press: "한국경제", first: 28, follow: 21 },
          { press: "매일경제", first: 34, follow: 29 }
        ];

        var xRenderer = am5xy.AxisRendererX.new(root, { minGridDistance: 30 });

        var xAxis = chart.xAxes.push(
          am5xy.CategoryAxis.new(root, {
            categoryField: "press",
            renderer: xRenderer,
            tooltip: am5.Tooltip.new(root, {})
          })
        );

        xAxis.data.setAll(data);

        var yAxis = chart.yAxes.push(
          am5xy.ValueAxis.new(root, {
            renderer: am5xy.AxisRendererY.new(root, {})
          })
        );

        var firstSeries = chart.series.push(
          am5xy.ColumnSeries.new(root, {
            name: "최초 보도 수",
            xAxis: xAxis,
            yAxis: yAxis,
            valueYField: "first",
            categoryXField: "press",
            stacked: true,
            tooltip: am5.Tooltip.new(root, {
              labelText: "{name}\n언론사: {categoryX}\n값: {valueY}"
            })
          })
        );

        firstSeries.columns.template.setAll({
          cornerRadiusTL: 8,
          cornerRadiusTR: 8
        });

        firstSeries.data.setAll(data);

        var followSeries = chart.series.push(
          am5xy.ColumnSeries.new(root, {
            name: "후속 보도 수",
            xAxis: xAxis,
            yAxis: yAxis,
            valueYField: "follow",
            categoryXField: "press",
            stacked: true,
            tooltip: am5.Tooltip.new(root, {
              labelText: "{name}\n언론사: {categoryX}\n값: {valueY}"
            })
          })
        );

        followSeries.columns.template.setAll({
          cornerRadiusBL: 8,
          cornerRadiusBR: 8
        });

        followSeries.data.setAll(data);

        var legend = chart.children.push(
          am5.Legend.new(root, {
            centerX: am5.p50,
            x: am5.p50
          })
        );

        legend.data.setAll(chart.series);

        chart.appear(1000, 200);
        firstSeries.appear();
        followSeries.appear();
      });
    </script>
  </body>
</html>
